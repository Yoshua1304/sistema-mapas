/* === BASE & LAYOUT === */
body, html, #root {
  margin: 0;
  font-family: sans-serif;
  height: 100%;
  overflow: hidden;
}

.app-container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100vw;
}

.map-container {
  flex: 1;
  position: relative; /* Crucial for positioning floating elements */
}

/* === HEADER === */
.header {
  background-color: #106bc7;
  color: white;
  padding: 5px 20px;
  display: flex;
  align-items: center;
  z-index: 1050;
}

.logo-container {
  display: flex;
  align-items: center;
  flex: 1;
}

.logo-container img {
    height: 70px;
    width: 70px;
    margin-right: 10px;
}

.brand-text {
  font-size: 1.6rem;
  font-weight: 500;
  margin-right: 15px;
}

.separator {
    border-left: 1px solid rgba(255, 255, 255, 0.7);
    height: 65px;
    margin-right: 15px;
}

.logo-container h1 {
    font-size: 1.5rem;
}

/* === FLOATING SIDEBAR (CAPAS) === */
.sidebar-floating {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 320px;
  height: 72vh; /* Altura fija */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #ccc;
  border-radius: 4px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  z-index: 1020;
  display: flex;
  flex-direction: row;
  transition: transform 0.3s ease-in-out;
}

.sidebar-floating:not(.open) {
  transform: translate(-280px, -50%);
}

/* === CONTENIDO PRINCIPAL DESLIZABLE (IZQUIERDA) === */.sidebar-content {

    /* Ocupa el espacio del contenido (320px - 40px = 280px) */

    width: 280px; 

    display: flex;

    flex-direction: column;

    min-width: 0; 

    background-color: white; /* Para que el contenido sea blanco */

}/* === COLUMNA DE NAVEGACIÓN (DERECHA) === */.sidebar-nav {

    display: flex;

    flex-direction: column;

    width: 40px; /* Ancho fijo para la columna de íconos */

    background-color: #333333; /* Fondo oscuro */

    padding: 5px 0;

    border-radius: 0 4px 4px 0;

    align-items: center;

    gap: 5px; /* Espacio entre botones */

}/* Estilo general para los botones de navegación */.sidebar-nav button {

    background: none;

    border: none;

    color: white;

    padding: 10px 0;

    width: 100%; /* Para que ocupe todo el ancho de 40px */

    font-size: 1.2rem;

    cursor: pointer;

    transition: background-color 0.2s;

}.sidebar-nav button:hover:not(.sidebar-toggle-button-close) {

    background-color: #555555;

}/* Estilo para el botón activo (solo Capas, ya no hay Leyenda) */.sidebar-nav .nav-button.active {

    background-color: #106bc7;

}/* ⭐ Botón de la flecha roja para cerrar (parte inferior o superior) ⭐ */.sidebar-toggle-button-close {

    /* Color de fondo rojo */

    background-color: #106bc7 !important; 

    /* Colocado en la parte inferior de la barra de navegación para el diseño propuesto */

    margin-top: auto; 

    padding: 15px 0 !important;

}.sidebar-toggle-button-close:hover {

    background-color: #106bc7 !important; 

}

.sidebar-header {
  background-color: #106bc7;
  color: white;
  padding: 10px 15px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
}

.sidebar-header h3 {
  margin: 0;
  font-size: 1.1rem;
}

.sidebar-toggle-button {
    display: none;
}

.layer-search {
  padding: 10px;
  display: flex;
  border-bottom: 1px solid #ddd;
}

.layer-search input {
  width: 100%;
  padding: 8px;
  border: 1px solid black;
  background-color: white;
  color: black;
  border-radius: 3px 0 0 3px;
  box-sizing: border-box;
}

.layer-search button {
  border: 1px solid black;
  border-left: none;
  background-color: white;
  padding: 0 10px;
  cursor: pointer;
  border-radius: 0 3px 3px 0;
}

/* === NEW HIERARCHICAL LAYER LIST === */
.layer-list, .sub-layer-list {
  list-style: none;
  padding: 0;
  margin: 0;
  overflow-y: auto;
  flex: 1;
  min-height: 0;
}

.layer-list {
  padding: 10px;
}

.sub-layer-list {
  padding-left: 20px; /* Indent sub-layers */
}

.layer-item {
  margin-bottom: 5px;
}

.layer-header {
  display: flex;
  align-items: center;
  cursor: pointer;
}

.layer-name {
  flex-grow: 1;
  padding: 4px;
  font-size: 0.9rem;
  color: #333;
}

.arrow {
  width: 20px;
  text-align: center;
  font-size: 0.7rem;
  color: #555;
  transition: transform 0.2s;
}

.arrow.clickable:hover {
  color: #000;
}

.arrow.expanded {
  transform: rotate(90deg);
}

.layer-checkbox {
  margin-right: 8px;
}

/* === ESTILO MINIMALISTA PARA SCROLLBAR (CHROME, SAFARI) en la lista de capas === */
.layer-list::-webkit-scrollbar {
    width: 6px; /* Ancho de la barra de desplazamiento vertical */
}

.layer-list::-webkit-scrollbar-track {
    background: transparent; /* Fondo transparente */
}

.layer-list::-webkit-scrollbar-thumb {
    background-color: #AAAAAA; /* Color gris claro/medio */
    border-radius: 10px; /* Bordes redondeados */
    border: none;
}

.layer-list::-webkit-scrollbar-thumb:hover {
    background-color: #888888;
}

.layer-list::-webkit-scrollbar-button {
    display: none;
}
/* === FIN ESTILO MINIMALISTA === */

/* === FLOATING TOP-RIGHT WIDGETS === */
.map-search-bar {
  display: flex;
  background-color: white;
  padding: 5px;
  border-radius: 4px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  border: 1px solid black;
  z-index: 1020; /* Mantenemos este z-index alto para el buscador */
  width: 100%; /* Asegura que ocupe todo el ancho de su contenedor padre (350px) */
  box-sizing: border-box; /* Para incluir padding y border dentro del width */
}

.map-search-bar input {
  border: none;
  padding: 5px;
  outline: none;
  width: 250px;
  color: black;
  background-color: white;
  flex-grow: 1;
}

.map-search-bar button {
  background: none;
  border: none;
  cursor: pointer;
}

/* Contenedor padre de la barra de búsqueda */
.map-search-bar-container {
    position: absolute;
    top: 15px; /* Ajusta según tu diseño */
    right: 15px; /* Distancia desde la derecha */
    z-index: 1025; /* Asegura que esté sobre el mapa */
    width: 350px; /* Ancho deseado para el buscador */
}

/* --- ESTILOS VISUALES DE LA LISTA DE SUGERENCIAS --- */
.suggestion-list {
    list-style: none;
    padding: 0;
    margin: 0;
    position: absolute; 
    top: 100%; /* Coloca la lista justo debajo del .map-search-bar */
    left: 0; 
    width: 100%; 
    z-index: 1021;
    border: 1px solid #ccc;
    border-top: none;
    background-color: white;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    max-height: 200px; 
    overflow-y: auto;
}

/* El resto de estilos de la lista se mantienen */
.suggestion-list li {
    padding: 8px 12px;
    cursor: pointer;
    font-size: 14px;
    color: #333;
}

.suggestion-list li:hover {
    background-color: #f0f0f0;
    font-weight: bold;
}

/* Estilo del track (el fondo de la barra de desplazamiento) */
.suggestion-list::-webkit-scrollbar {
    width: 8px; 
}
.suggestion-list::-webkit-scrollbar-thumb {
    background-color: #888; 
    border-radius: 4px; 
}
.suggestion-list::-webkit-scrollbar-thumb:hover {
    background-color: #555; 
}

/* === FLOATING MAP TOOLS (RIGHT) === */
.map-tools {
  position: absolute;
  top: 70px;
  right: 15px;
  display: flex;
  flex-direction: column;
  z-index: 1018;
}

.map-tools button {
  background-color: white;
  border: 1px solid #aaa;
  padding: 8px;
  margin-bottom: -1px;
  cursor: pointer;
  font-size: 1.4rem;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}
.map-tools button:first-child { border-radius: 4px 4px 0 0; }
.map-tools button:last-child { border-radius: 0 0 4px 4px; }
.map-tools button:hover { background-color: #f4f4f4; }

/* CSS en tu archivo de estilos global */
.district-tooltip {
    /* Fondo del tooltip */
    background-color: #333;
    color: white;
    border: none;
    font-weight: bold;
    font-size: 14px;
    padding: 4px 8px;
    border-radius: 4px;
    /* Eliminar el "pico" triangular de Leaflet para un look más moderno (opcional) */
    pointer-events: none; /* Asegura que no interfiera con el mouseout */
}

/* Opcional: Estilizar el contenedor principal de Leaflet para quitar el triángulo */
.leaflet-tooltip-pane .district-tooltip::before {
    border: 0; 
}

/* 1. Selecciona la capa interactiva del GeoJSON */
.leaflet-container .leaflet-interactive {
    /* Quita el contorno de enfoque (focus) al hacer clic */
    outline: none !important;
}

/* 2. Regla específica para navegadores basados en Webkit (Chrome, Safari, etc.) */
/* Asegura que no haya un borde visible adicional */
.leaflet-container .leaflet-interactive:focus {
    outline: none !important;
}

/* === COMPASS (TOP-LEFT) === */
.compass {
  position: absolute;
  top: 15px;
  left: 15px;
  z-index: 1010;
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
}

.compass-n {
  font-size: 14px;
  font-weight: bold;
  color: #333;
  background-color: white;
  width: 20px;
  height: 20px;
  text-align: center;
  line-height: 20px;
  border-radius: 3px;
  margin-bottom: 2px;
  border: 1px solid #aaa;
}

.compass-arrow-up {
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-bottom: 12px solid #106bc7; /* Red part */
}

.compass-arrow-down {
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-top: 12px solid white; /* White part */
}


/* === LEAFLET OVERRIDES === */
.leaflet-control-container {
    display: none;
}


/* === RESPONSIVE DESIGN === */
@media (max-width: 992px) {
  .brand-text { font-size: 1.2rem; }
  .logo-container h1 { font-size: 1rem; }
}

@media (max-width: 768px) {
  .brand-text, .separator {
    display: none;
  }
  .logo-container h1 {
    font-size: 0.9rem;
  }
  .map-search-bar {
      top: auto;
      bottom: 15px;
      left: 15px;
      right: 15px;
      width: auto;
  }
  .map-search-bar input { width: 100%; }
  .base-maps-widget, .map-tools, .compass, .sidebar-floating {
      display: none;
  }
}
/* === MOUSE COORDINATES DISPLAY === */
.mouse-coordinates {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1010;
  display: flex;
  font-family: sans-serif;
  font-size: 11px;
  pointer-events: none;
  border: 1px solid #000;
  
  /* Reset properties */
  padding: 0;
  gap: 0;
  border-radius: 0;
  box-shadow: none;
  background-color: transparent;
}

.coord-item {
  padding: 4px 10px;
  background-color: white;
  color: black;
  border-right: 1px solid #777;
  white-space: nowrap;
}

.mouse-coordinates .coord-item:last-child {
  border-right: none;
}

/* Special style for the DATUM field */
.coord-item.datum {
  background-color: #4B4B4B;
  color: white;
  font-weight: normal;
}

/* Placeholder text color */
.layer-search input::placeholder,
.map-search-bar input::placeholder {
  color: grey;
  opacity: 1; /* Override Firefox\'s default opacity */
}

/* En App.css */
.leaflet-popup-content-wrapper {
  padding: 0;
  border-radius: 8px; /* Bordes redondeados del contenedor principal */
  overflow: hidden; 
}

.leaflet-popup-content {
  margin: 0 !important;
  width: auto !important;
}

/* Opcional: Ajustar la "X" de cerrar para que se vea blanca sobre el rojo */
.leaflet-container a.leaflet-popup-close-button {
  color: white !important;
  top: 8px;
  right: 8px;
  text-shadow: none;
}

/* === LOADER / SPINNER ANIMADO === */
.loading-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    /* Fondo semitransparente para que se vea que el mapa está detrás */
    background-color: rgba(255, 255, 255, 0.85); 
    z-index: 2000; /* Asegura que esté por encima de todos los elementos flotantes (z-index de Leaflet es ~1000) */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    font-size: 1.2rem;
    color: #106bc7;
    opacity: 1;
    transition: opacity 0.3s ease-in-out;
}

.loading-logo {
    width: 100px; 
    height: 100px;
    margin-bottom: 20px;
    animation: pulse-build 1.8s ease-in-out infinite; 
    transform-origin: center center;
}

/* Estilo para el texto de carga */
.loading-overlay p {
    margin: 0;
    font-weight: bold;
}

/* ⭐ NUEVA DEFINICIÓN DE LA ANIMACIÓN: PULSACIÓN / CONSTRUCCIÓN ⭐ */@keyframes pulse-build {
    0% { 
        /* Inicia muy pequeño y ligeramente transparente */
        transform: scale(0.2); 
        opacity: 0.3;
    }

    50% { 
        /* Llega a su tamaño normal, totalmente visible */
        transform: scale(1); 
        opacity: 1;
    }

    100% { 
        /* Vuelve al estado inicial pequeño para repetir el ciclo */
        transform: scale(0.2); 
        opacity: 0.3;
    }
}